+++
title = "2021年の振り返り"
description = "2021年、エンジニア3年目の振り返り"
date = "2021-12-26"
tags = ["blog"]
slug = "2021"
+++

2021年はエンジニアとして3年目、COVID-19の世界的なパンデミックは次々と出現する変異株により引き続き続いており、リモートワークメインな年でした。
個人的には[バックエンドエンジニアからSREへの転向](https://www.biosugar0.com/posts/2021/12/to-sre/)を行い、キャリアの転機となる年でもありました。

<!--more-->

## 1-3月

###  1月からSREを兼務開始

このくらいからSREとバックエンドの兼務を始めました。

SREとしては、

* k8sの権限周りのIRSAの検証

    これはけっこう複雑で難しかったですね。IRSAだけでなく、external secretの検証も兼ねていたので一緒にうまく動くようにするのに苦戦しました。
* ECSの環境構築
* VPAによる推奨リソース値の可視化の検証と導入

    導入したものの活用できていないのでDatadogとうまく連携して活用したいと思っています。
* 諸々SREに来る依頼

などをやっていました。k8s系の検証結果はまだ本番で活用できていないのでやっていきたいです。


バックエンドエンジニアとしては、
* CS業務支援を目的とした自社サービスの一括操作系の開発

    ここでマイクロサービスの実装方針として複雑性を抑えるためにAPIのバージョニングを基本しないように後方互換性をもって作ることにしたり、それに沿ってリファクタリングや使われていないバージョンの実装を削除したりしました。
* Go 1.16で入ったembedを使ってファイル埋め込みをすることにより依存ツールを減らす

    特にGoの更新は日々追っていて、便利なものが入ったら試して有用なら取り入れる活動をしています。


などをやっていました。マイクロサービスは日々変更が加えられ複雑になっていきがちなので複雑性を抑える努力も同時に必要だなと感じています。

## 4-6月


SREとしては、

* [Kubernetes Secrets Store CSI DriverとAWSのSecrets ManagerやParameter Storeが連携できるようになった](https://aws.amazon.com/jp/blogs/news/how-to-use-aws-secrets-configuration-provider-with-kubernetes-secrets-store-csi-driver/)のでその検証

    これは機密情報を管理するのにシンプルにできてよさそうでした。まだ本番導入していませんが、うまく動くのが確認できたので必要になったら導入しようと思っています。

* ローカル開発環境で使用しているTelepresenceのバージョン2の検証と導入

    これは最初機能が足りていなくて運用するには厳しかったのですが、コミュニティのslackで質問したり機能追加アップデートがあったりして開発で使用できるようになりました。
    これに関しては[Telepresence2へ移行するためにやったこと](https://tech.smartshopping.co.jp/to-telepresence2)という記事も書きました。使い方を考案して社内ハンズオンもやりました。

* EKSアップデートの準備

    システムコンポーネントのアップデートと検証など。

などをやっていました。 Kubernetes Secrets Store CSI DriverとAWSの連携はやっていきたいです。

バックエンドエンジニアとしては、

* 医療機関向け発注機能の追加
* サービスの発注機能の発注条件の追加

などをやっていました。
この時期はこれらの機能開発に一番時間を使いました。


## 7-12月

SREとしては、
* サーバーのSLOを観測できるようにする
* SREのミッション、役割を明文化

    SREが運用組織のようになっていたことに対する問題提起と議論を主導し、未定義だったミッション、役割とあるべき姿を明文化しました。また、11月からは正式にバックエンドエンジニアからSREに異動し、SREとしての活動を本格化させています。
    [転向しましたブログも書きました](https://www.biosugar0.com/posts/2021/12/to-sre/)。
* プロダクションレディネスチェックリストの作成
* プロダクトエンゲージメントモデルの構築

などをやっていました。この後半でSREとしての動きを本格化させていきました。


バックエンドエンジニアとしては、
* ローカル前提のテストをGithub Actionsで通るようにする実装
* moqを用いたインフラ層をモックしたテストの導入
* Github Actionsでの自動linter,コメントの導入
* Github Actionsでの自動テスト
* 全てのマイクロサービスへのCI導入を主導
* CS業務支援を目的とした自社サービスの一括操作系の開発

などをやっていました。継続的なテストのための環境は整備できたと思っています。

## 2021年MVP受賞

今年はありがたいことに2021年一番輝いた従業員に送られるMVPを受賞しました。

これは、以下のような事項を総合的に評価していただいたことによります。

* 開発環境の改善に対するモチベーション高く、オーナーシップもって検証、共有する姿勢。有用な情報はドキュメントとして横展開され再現性も意識されている
* エンジニア外からの問い合わせを介してお客様の課題や運用上の課題に対し積極的に対応した(エンジニアへの問い合わせのほぼ半分)
* 理想的なSREチームを構築していくために、現状の課題感と共に、解決のための提案と実行を周囲を巻き込みながら推進した
など


SREとしての最初の動きも評価していただいているので、励みになります。

## 目標の振り返り

[去年の目標](https://www.biosugar0.com/posts/2021/01/goal-2021/)は達成できず。
SRE本など重い本を選んで読んでいたのもあり、時間の使い方にもうちょっと工夫が必要でした。

とはいえ、[ACM(Association for Computing Machinery)](https://www.acm.org/)の会員になって便利に技術書にアクセスできるようになったメリットは感じていて、継続して課金しようと思います。

あと、数を目標にすると軽い本ばっかり選ぶようになりそうなのでやめようかと思っています。

## さいごに

今年はSREに異動して動き始め、個人的なキャリアの転機となった年でした。
SREとして活動し始めて、バックエンドエンジニアのときよりも関係各所との連携が増え、ソフトスキルの重要性が増したように感じています。
いままで技術的なスキルに集中していましたが、SREとして最大の価値を発揮できるチームを作っていくために来年はそのあたりも勉強していこうと思います。
